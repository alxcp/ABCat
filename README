Каталог ссылок

Приложение является базой, на основе которой можно создавать каталоги различного контента.
Приложение имеет систему плагинов, которые могут добавлять в него различную функциональность по поиску контента, его структурированию, группировке, фильтрации, представлению и др.
В базовую версию входят плагины для поддержки каталога раздач аудиокниг с сайта Rutracker.org

Для пользователей:
Системные требования:
- Windows Vista (Необходимы для поддержки .Net Framework 4.5)
- .Net Framework 4.5
- Доступ в интернет (при обновлении каталога и загрузке контента)
- Свободное место на диске: 200Mb+ (для хранения БД)
- CPU: Любой более-менее современный. Фильтрация и группировка записей каталога могут потребовать довольно много ресурсов процессора, поэтому чем больше - тем лучше, но работать должно и на слабых машинах.
- RAM: Приложение использует 150-200 MB Ram.

Установка приложения не требуется. Достаточно скопировать файлы на диск и запустить ABCat.exe. При первом запуске потребуется указать пути для хранения БД, загрузки контента, путь к uTorrent, срок актуальности записей каталога и группы каталога (актуальные записи не загружаются при обновлении каталога).

Приложение построено на:
- .Net Framework 4.7.2
- WPF
- ModernUI.WPF.1.0.5
- WPFToolkit.3.5.50211.1

Структура решения (в порядке зависимости):
- ABCat.Shared
   Общая для всех проектов библиотека. Базовые утилиты, типы данны и т.д.
- ABCat.DB
   Слой доступа к данным. Структура Entity, классы для упрощения работы с базой.
- ABCat.Plugins.Core
   Ядро плагинов. Интерфейсы поддерживаемых плагинов, контекст приложения.
- ABCat
   GUI, модели для работы GUI, и т.д. Windows Application


Структура хранилища каталога:
- Catalog.sdf
   Основная БД хранилища. Записи каталога, группировка записей, метаданные
- PageStorage.sdf
   Хранилище кешированных Html, загруженных при обновлении каталога. Может использоваться для повторного парсинга записей без обращения на сайт источника. Имеет наибольший размер и может быть удалён в любой момент - при отсутствии страницы в кеше она будет повторно загружена с сайта.
- ProcessingSettings.sdf
   Настройки парсеров (списки автозамены для нормализации каталога)
- UserData.sdf
   Пользовательские данные каталога (информация о загрузке записей, скрытии записей на UI). Пользовательские данные отделены от основной БД для упрощения обмена базами между пользователями - при замене Catalog.sdf пользователь не теряет своих личных данных.

Плагины. Плагином может быть Dll на .Net Framework 4.5, содержащая классы, помеченные специальным атрибутом ABCat.Plugins.Core.PluginCreatorAttribute и реализующие один или несколько интерфейсов приложения. В конструктор класса передается экземпляр контекста приложения со всей необходимой информацией для инициализации и работы плагина.

Структура плагинов:
== Site Плагины для операций с источниками контента, наполнения БД
---- ISiteParserPlugin
      Плагин для наполнения каталога. Обеспечивает загрузку записей из какого-либо источника, загрузку метаданных для записей, наполнение каталога. В ABCat.Plugins.Core имеется абстрактный класс SiteParserBase, обеспечивающий базовую логику асинхронности. При создании плагинов рекомендуется наследоваться от этого класса.
---- IRecordTargetDownloaderPlugin
      Плагин для загрузки контента, связанного с записью каталога.    В ABCat.Plugins.Core имеется абстрактный класс RecordTargetDownloaderBase, обеспечивающий базовую логику асинхронности. При создании плагинов рекомендуется наследоваться от этого класса.

== Catalog Плагины для операций с каталогом контекта
---- IFilteringLogicPlugin
      Интерфейс для плагинов, обеспечивающих фильтрацию записей на UI. Класс должен представлять открытые поля для ввода параметров фильтрации, методы обновления кешей фильтра и методы фильтрации.
---- IGrouppingLogicPlugin
      Интерфейс для плагинов, обеспечивающих группировку записей на UI.
---- INormalizationLogicPlugin
      Интерфейс для плагинов, обеспечивающих логику нормализации данных в каталоге. Нормализация - это процесс нахождения различных вариантов представления одного и того же значения атрибута записи каталога (например "Стивен Кинг" == "Кинг Стивен" == "Кинг Стивн"), и их приведения к единому виду. Плагин может иметь собственную логику формирования списков автозамены (например синтаксический анализ), или пользоваться базой списков автозамены (ProcessingSettings.sdf)

== UI Плагины для пользовательского интерфейса
---- IBrowserWindowPlugin
      Плагин, отображающий окно браузера и показывающий содержимое страницы, связанной с записью каталога
---- IRecordsListPlugin
      Пользовательский контрол, отображающий набор записей каталога. Обеспечивает необходимые методы навигации по записям, выделению записей и т.д.

Базовая версия проекта содержит необходимый набор стандартных плагинов, обеспечивающих работы с каталогом аудиокниг сайта Rutracker.org
Плагины могут иметь ссылку на проекты ABCat.Shared, ABCat.Plugins.Core, ABCat.DB




Вашему вниманию предлагается база раздач крупнейшего сайта rutracker. Мы постарались представить ВСЕ раздачи на указанное в заголовке число. Её содержимое: заголовки раздач, описания (без картинок), а так же magnet-ссылки для скачки без захода на трекер. Та же в раздачу входит программа для комфортного использования этой базы. Подробнее смотрите на скриншот выше.

Чтобы использовать программу, нужен файл final.txt или final.txt.gz или final.txt.bz2. Два последних варианта являются сжатыми версиями первого. Где взять файлы, см. links.txt

Запустите dump_viewer.exe, введите фразу для поиска в строчку, расположенную в верхней части программы. Нажмите кнопку "Найти" или клавишу ВВОД на клавиатуре. Количество результатов можно изменять в поле "макс.находок". Чем больше находок запросите - тем дольше будет искать.

Дальше смотрим на табличку. Думаю, значение столбцов не нужно объяснять. Обращаю ваше внимание, что по всем столбцам можно сортировать, а по умолчанию результаты отсортированы по количеству загрузок. Если дважды щелкнуть по любой ячейке, значение в ней выделяется и становится пригодным для копирования (Ctrl + Цэ).

Важно: чтобы просмотреть описание раздачи, щелкните левой кнопкой мышки в любое поле, кроме номера раздачи и хеша. Описание будет отображено снизу. Чтобы подгрузить страницу с раздачей и отобразить её снизу, щелкните по номеру раздачи. Чтобы скопировать URL раздачи, щелкните по её номеру правой кнопкой мыши. Чтобы открыть магнитную ссылку, щелкните по ней левой кнопкой мыши, чтобы скопировать - правой.

Разбор пунктов меню:

Файл - Выбрать базу: указываете путь к final.txt, final.txt.gz или final.txt.bz2, в котором хранится список раздач.
Файл - Распаковать базу: выбраннй в предыдущем пункте файл final.txt.gz или final.txt.bz2 распаковывается в final.txt, чтобы поиск по нему ускорился. Выбирать final.txt при помощи "Файл - Выбрать базу" после этого не требуется.
Файл - Выбрать базу описаний: указываете путь к папке, в которой лежат описания (папки 001, 002 и т.д.). Описание раздачи с номером 1234567 лежит в файле 012/01234.tar.gz/01234567 в кодировке UTF-8.

Вид - base32-хеши: отображать в колонке "хеш" base32-запись хеша. Без этой галочки отображаются HEX-хеши. Большинству клиентов нет разницы, в каком формате хеш, но есть те, которым нужен только base32 (Vuze, к примеру). HEX-хеш считается более современным.
Вид - кодировка cp1251: не выбирайте эту опцию. Она заставит программу считать, что файл final.txt закодирован в cp1251. Опция оставлена для совместимости с предыдущим форматом final.txt.

Настройки программа хранит в файле dump_viewer.ini, расположенном в папке с программой.

[b]Причины[/b], побудившие меня создать данную базу: чтобы облегчить доступ пользователей к раздачам в случае проблем с доступностью сайта трекера. Например, когда выводится сообщение "форум временно отключен". Кроме того, эта раздача пригодится, если трекер будет внесен в список заблокированных сайтов. Не хочется, чтобы был даже мельчайший шанс того, что всё, что мы тут вместе сделали за эти годы, потерялось по прихоти чиновников или из-за поломки сервера, к примеру. Пока жива данная раздача, все раздачи трекера тоже живы. Вероятно, раз в месяц нужно будет обновлять эту раздачу.

Для пользователей windows: устанавливаем OpenSSL для Windows отсюда: http://slproweb.com/products/Win32OpenSSL.html прямая ссылка http://slproweb.com/download/Win32OpenSSL_Light-1_0_1e.exe при установке выбираем Copy ssl dll to: The Windows system directory (если выберем Open SSL binaries нужно будет прописать в переменную окружения PATH) запускаем dump_viewer.exe
Для линуксоидов: есть исходники и  Вы всегда можете собрать сами (инструкции в INSTALL).
Для ленивых обладателей 32-битных систем в раздаче есть бинарник dump_viewer. Требует Qt и kdelibs. Ну или всегда можно использовать (z)grep.
Для 64-битных линуксов бинарников нет.
Для маководов: мне собирать не на чем, собирайте сами. Пишите результат на мыло, включу в инструкцию.

Исходники: https://bitbucket.org/ratnik/dump_viewer
Разные ссылки: links.txt
Инструкции по сборке: INSTALL
Ссылки на раздачи и файлообменники: links.txt
sha256-хеши всех файлов раздачи: sha256.txt
    актуальный sha256.txt и sha256.txt.asc можно взять в торренте
    и тут: https://bitbucket.org/ratnik/dump_viewer/downloads
    проверить (в папке с торрентом): sha256sum -c sha256.txt
GPG fingerprint: C567 227F 6D75 014E CDC0  FE7B E0F9 25D1 E020 95A4
GPG key E02095A4: ratnik.gpg
    импортировать ключ: gpg --import ratnik.gpg
GPG-подпись файла sha256.txt: sha256.txt.asc
    проверить подпись: gpg --verify sha256.txt.asc
e-mail: sir.ratnik@yandex.ru
Jabber: sir.ratnik@ya.ru
конференция torrents-database@conference.jabber.no
OTR fingerprint: 7503B021 02E30FEA 88861B43 7AB21676 35704DBA

Оставайтесь на раздаче!